import { MASTER_DATA_CONFIG } from "@/constants";
import {
  BellOutlined,
  GiftOutlined,
  MessageOutlined,
  SearchOutlined,
  SettingOutlined,
} from "@ant-design/icons";
import {
  Avatar,
  Badge,
  Divider,
  Dropdown,
  Flex,
  Input,
  Layout,
  Menu,
  Typography,
} from "antd";
import type { MenuProps } from "antd/lib";
import { useState } from "react";
import { Link, Outlet } from "react-router-dom";
import styles from "./MainLayout.module.scss";
const { Header, Content, Sider } = Layout;
export const MainLayout = () => {
  const items: MenuProps["items"] = [
    {
      key: "dashboard",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M2.5 6.66732V16.6673C2.5 16.8883 2.5878 17.1003 2.74408 17.2566C2.90036 17.4129 3.11232 17.5007 3.33333 17.5007H7.5C7.72101 17.5007 7.93297 17.4129 8.08925 17.2566C8.24554 17.1003 8.33333 16.8883 8.33333 16.6673V10.834H11.6667V16.6673C11.6667 16.8883 11.7545 17.1003 11.9107 17.2566C12.067 17.4129 12.279 17.5007 12.5 17.5007H16.6667C16.8877 17.5007 17.0996 17.4129 17.2559 17.2566C17.4122 17.1003 17.5 16.8883 17.5 16.6673V6.66732C17.5 6.53795 17.4699 6.41035 17.412 6.29464C17.3542 6.17893 17.2702 6.07827 17.1667 6.00065L10.5 1.00065C10.3558 0.892466 10.1803 0.833984 10 0.833984C9.81969 0.833984 9.64425 0.892466 9.5 1.00065L2.83333 6.00065C2.72984 6.07827 2.64583 6.17893 2.58798 6.29464C2.53012 6.41035 2.5 6.53795 2.5 6.66732ZM4.16667 7.08399L10 2.70898L15.8333 7.08399V15.834H13.3333V10.0007C13.3333 9.77964 13.2455 9.56768 13.0893 9.4114C12.933 9.25512 12.721 9.16732 12.5 9.16732H7.5C7.27899 9.16732 7.06702 9.25512 6.91074 9.4114C6.75446 9.56768 6.66667 9.77964 6.66667 10.0007V15.834H4.16667V7.08399Z"
            fill="currentColor"
          />
        </svg>
      ),
      label: <Link to="/app/dashboard">Dashboard</Link>,
    },
    {
      key: "primary",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M17.5003 4.16667H2.50033C2.0281 4.16667 1.66699 3.80555 1.66699 3.33333C1.66699 2.86111 2.0281 2.5 2.50033 2.5H17.5003C17.9725 2.5 18.3337 2.86111 18.3337 3.33333C18.3337 3.80555 17.9725 4.16667 17.5003 4.16667Z"
            fill="currentColor"
          />
          <path
            d="M12.5003 8.61198H2.50033C2.0281 8.61198 1.66699 8.25087 1.66699 7.77865C1.66699 7.30642 2.0281 6.94531 2.50033 6.94531H12.5003C12.9725 6.94531 13.3337 7.30642 13.3337 7.77865C13.3337 8.25087 12.9725 8.61198 12.5003 8.61198Z"
            fill="currentColor"
          />
          <path
            d="M17.5003 13.0553H2.50033C2.0281 13.0553 1.66699 12.6942 1.66699 12.222C1.66699 11.7498 2.0281 11.3887 2.50033 11.3887H17.5003C17.9725 11.3887 18.3337 11.7498 18.3337 12.222C18.3337 12.6942 17.9725 13.0553 17.5003 13.0553Z"
            fill="currentColor"
          />
          <path
            d="M12.5003 17.5007H2.50033C2.0281 17.5007 1.66699 17.1395 1.66699 16.6673C1.66699 16.1951 2.0281 15.834 2.50033 15.834H12.5003C12.9725 15.834 13.3337 16.1951 13.3337 16.6673C13.3337 17.1395 12.9725 17.5007 12.5003 17.5007Z"
            fill="currentColor"
          />
        </svg>
      ),
      label: "Quản lý sơ cấp",
      children: [
        {
          key: "2-1",
          label: (
            <Link to="/app/primary/issuance-batch-management">
              Quản lý lô phát hành
            </Link>
          ),
        },
        {
          key: "2-2",
          label: (
            <Link to="/app/primary/issuance-approval">Phê duyệt phát hành</Link>
          ),
        },
        {
          key: "2-3",
          label: (
            <Link to="/app/primary/matured-batch-settlement">
              Tất toán lô đến hạn
            </Link>
          ),
        },
        {
          key: "2-4",
          label: (
            <Link to="/app/primary/interest-payment-schedule">
              Lịch trả lãi
            </Link>
          ),
        },
        {
          key: "2-5",
          label: (
            <Link to="/app/primary/working-day-management">
              Quản lý ngày làm việc
            </Link>
          ),
        },
        {
          key: "2-6",
          label: (
            <Link to="/app/primary/primary-purchase-management">
              Quản lý mua sơ cấp
            </Link>
          ),
        },
        {
          key: "2-7",
          label: (
            <Link to="/app/primary/primary-sale-management">
              Quản lý bán sơ cấp
            </Link>
          ),
        },
        {
          key: "2-8",
          label: <Link to="/app/primary/automated-job">Job tự động</Link>,
        },
      ],
    },
    {
      key: "secondary",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M10.5416 1.86602C10.3906 1.73693 10.1985 1.666 9.99992 1.66602H4.16659C3.94557 1.66602 3.73361 1.75381 3.57733 1.91009C3.42105 2.06637 3.33325 2.27834 3.33325 2.49935V17.4993C3.33325 17.7204 3.42105 17.9323 3.57733 18.0886C3.73361 18.2449 3.94557 18.3327 4.16659 18.3327H15.8333C16.0543 18.3327 16.2662 18.2449 16.4225 18.0886C16.5788 17.9323 16.6666 17.7204 16.6666 17.4993V7.49935C16.6666 7.37898 16.6405 7.26004 16.5902 7.15071C16.5398 7.04138 16.4664 6.94425 16.3749 6.86602L10.5416 1.86602ZM10.8333 4.30768L13.5833 6.66602H10.8333V4.30768ZM14.9999 16.666H4.99992V3.33268H9.16659V7.49935C9.16659 7.72036 9.25438 7.93232 9.41066 8.0886C9.56694 8.24488 9.77891 8.33268 9.99992 8.33268H14.9999V16.666Z"
            fill="currentColor"
          />
        </svg>
      ),
      label: "Quản lý thứ cấp",
    },
    {
      key: "master-data",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M15.9915 13.9242C16.4242 13.4077 16.6629 12.7563 16.6665 12.0825C16.6665 11.309 16.3592 10.5671 15.8122 10.0201C15.2653 9.47317 14.5234 9.16588 13.7498 9.16588H13.5165C14.2037 8.3492 14.5814 7.31657 14.5832 6.24921C14.5851 5.47967 14.3933 4.72202 14.0253 4.04614C13.6574 3.37026 13.1251 2.79791 12.4778 2.38187C11.8304 1.96583 11.0887 1.71948 10.321 1.66556C9.55335 1.61164 8.78447 1.75188 8.08529 2.07333C7.3861 2.39479 6.7791 2.88712 6.32028 3.50493C5.86145 4.12273 5.56557 4.84612 5.45992 5.60837C5.35427 6.37063 5.44224 7.14722 5.71574 7.86653C5.98923 8.58584 6.43944 9.2247 7.02484 9.72421C5.45006 10.3261 4.09486 11.3914 3.13819 12.7795C2.18151 14.1677 1.66837 15.8133 1.6665 17.4992C1.6665 17.7202 1.7543 17.9322 1.91058 18.0885C2.06686 18.2447 2.27882 18.3325 2.49984 18.3325C2.72085 18.3325 2.93281 18.2447 3.08909 18.0885C3.24537 17.9322 3.33317 17.7202 3.33317 17.4992C3.33317 15.7311 4.03555 14.0354 5.28579 12.7852C6.53604 11.5349 8.23173 10.8325 9.99984 10.8325H11.1248C10.8807 11.3292 10.787 11.8864 10.8551 12.4356C10.9232 12.9848 11.1502 13.5022 11.5082 13.9242C10.7982 14.3213 10.207 14.9005 9.7954 15.6021C9.3838 16.3037 9.16671 17.1024 9.1665 17.9159C9.1665 18.1369 9.2543 18.3488 9.41058 18.5051C9.56686 18.6614 9.77882 18.7492 9.99984 18.7492C10.2209 18.7492 10.4328 18.6614 10.5891 18.5051C10.7454 18.3488 10.8332 18.1369 10.8332 17.9159C10.8332 17.1423 11.1405 16.4005 11.6874 15.8535C12.2344 15.3065 12.9763 14.9992 13.7498 14.9992C14.5234 14.9992 15.2653 15.3065 15.8122 15.8535C16.3592 16.4005 16.6665 17.1423 16.6665 17.9159C16.6665 18.1369 16.7543 18.3488 16.9106 18.5051C17.0669 18.6614 17.2788 18.7492 17.4998 18.7492C17.7209 18.7492 17.9328 18.6614 18.0891 18.5051C18.2454 18.3488 18.3332 18.1369 18.3332 17.9159C18.333 17.1024 18.1159 16.3037 17.7043 15.6021C17.2927 14.9005 16.7014 14.3213 15.9915 13.9242ZM9.99984 9.16588C9.42298 9.16588 8.85907 8.99482 8.37942 8.67433C7.89978 8.35384 7.52594 7.89832 7.30519 7.36537C7.08443 6.83242 7.02667 6.24597 7.13921 5.6802C7.25175 5.11442 7.52954 4.59472 7.93744 4.18682C8.34535 3.77891 8.86505 3.50113 9.43082 3.38859C9.9966 3.27605 10.583 3.33381 11.116 3.55456C11.6489 3.77532 12.1045 4.14915 12.425 4.6288C12.7454 5.10844 12.9165 5.67235 12.9165 6.24921C12.9165 7.02276 12.6092 7.76462 12.0622 8.3116C11.5153 8.85858 10.7734 9.16588 9.99984 9.16588ZM13.7498 13.3325C13.4183 13.3325 13.1004 13.2008 12.866 12.9664C12.6315 12.732 12.4998 12.4141 12.4998 12.0825C12.502 11.7517 12.6344 11.435 12.8684 11.2011C13.1023 10.9671 13.419 10.8347 13.7498 10.8325C14.0814 10.8325 14.3993 10.9642 14.6337 11.1987C14.8681 11.4331 14.9998 11.751 14.9998 12.0825C14.9998 12.4141 14.8681 12.732 14.6337 12.9664C14.3993 13.2008 14.0814 13.3325 13.7498 13.3325Z"
            fill="currentColor"
          />
        </svg>
      ),
      label: "Danh mục",
      children: [
        {
          key: "all",
          label: <Link to="/app/master-data">Tất cả danh mục</Link>,
        },
        ...MASTER_DATA_CONFIG.map((item) => ({
          key: item.key,
          label: <Link to={`/app/master-data/${item.key}`}>{item.label}</Link>,
        })),
      ],
    },
    {
      key: "config",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M17.5 15.8327H4.16667V2.49935C4.16667 2.27834 4.07887 2.06637 3.92259 1.91009C3.76631 1.75381 3.55435 1.66602 3.33333 1.66602C3.11232 1.66602 2.90036 1.75381 2.74408 1.91009C2.5878 2.06637 2.5 2.27834 2.5 2.49935V16.666C2.5 16.887 2.5878 17.099 2.74408 17.2553C2.90036 17.4116 3.11232 17.4993 3.33333 17.4993H17.5C17.721 17.4993 17.933 17.4116 18.0893 17.2553C18.2455 17.099 18.3333 16.887 18.3333 16.666C18.3333 16.445 18.2455 16.233 18.0893 16.0768C17.933 15.9205 17.721 15.8327 17.5 15.8327Z"
            fill="currentColor"
          />
          <path
            d="M5.83325 9.16732V13.334C5.83325 13.555 5.92105 13.767 6.07733 13.9232C6.23361 14.0795 6.44557 14.1673 6.66659 14.1673C6.8876 14.1673 7.09956 14.0795 7.25584 13.9232C7.41212 13.767 7.49992 13.555 7.49992 13.334V9.16732C7.49992 8.9463 7.41212 8.73434 7.25584 8.57806C7.09956 8.42178 6.8876 8.33398 6.66659 8.33398C6.44557 8.33398 6.23361 8.42178 6.07733 8.57806C5.92105 8.73434 5.83325 8.9463 5.83325 9.16732Z"
            fill="currentColor"
          />
          <path
            d="M9.16675 4.99935V13.3327C9.16675 13.5537 9.25455 13.7657 9.41083 13.9219C9.56711 14.0782 9.77907 14.166 10.0001 14.166C10.2211 14.166 10.4331 14.0782 10.5893 13.9219C10.7456 13.7657 10.8334 13.5537 10.8334 13.3327V4.99935C10.8334 4.77834 10.7456 4.56637 10.5893 4.41009C10.4331 4.25381 10.2211 4.16602 10.0001 4.16602C9.77907 4.16602 9.56711 4.25381 9.41083 4.41009C9.25455 4.56637 9.16675 4.77834 9.16675 4.99935Z"
            fill="currentColor"
          />
          <path
            d="M12.5 6.66732V13.334C12.5 13.555 12.5878 13.767 12.7441 13.9232C12.9004 14.0795 13.1123 14.1673 13.3333 14.1673C13.5543 14.1673 13.7663 14.0795 13.9226 13.9232C14.0789 13.767 14.1667 13.555 14.1667 13.334V6.66732C14.1667 6.4463 14.0789 6.23434 13.9226 6.07806C13.7663 5.92178 13.5543 5.83398 13.3333 5.83398C13.1123 5.83398 12.9004 5.92178 12.7441 6.07806C12.5878 6.23434 12.5 6.4463 12.5 6.66732Z"
            fill="currentColor"
          />
          <path
            d="M15.8333 2.49935V13.3327C15.8333 13.5537 15.921 13.7657 16.0773 13.9219C16.2336 14.0782 16.4456 14.166 16.6666 14.166C16.8876 14.166 17.0996 14.0782 17.2558 13.9219C17.4121 13.7657 17.4999 13.5537 17.4999 13.3327V2.49935C17.4999 2.27834 17.4121 2.06637 17.2558 1.91009C17.0996 1.75381 16.8876 1.66602 16.6666 1.66602C16.4456 1.66602 16.2336 1.75381 16.0773 1.91009C15.921 2.06637 15.8333 2.27834 15.8333 2.49935Z"
            fill="currentColor"
          />
        </svg>
      ),
      label: "Cấu hình",
    },
    {
      key: "cron-job",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M2.49985 18.333H5.83318C5.94286 18.3336 6.05158 18.3126 6.15311 18.2711C6.25464 18.2296 6.34698 18.1685 6.42485 18.0913L16.4249 8.09129C16.503 8.01382 16.565 7.92165 16.6073 7.82011C16.6496 7.71856 16.6714 7.60963 16.6714 7.49962C16.6714 7.38961 16.6496 7.28069 16.6073 7.17914C16.565 7.07759 16.503 6.98543 16.4249 6.90796L13.0915 3.57462C13.014 3.49652 12.9219 3.43452 12.8203 3.39221C12.7188 3.34991 12.6099 3.32812 12.4999 3.32812C12.3898 3.32812 12.2809 3.34991 12.1794 3.39221C12.0778 3.43452 11.9857 3.49652 11.9082 3.57462L1.90818 13.5746C1.83095 13.6525 1.76985 13.7448 1.72838 13.8464C1.6869 13.9479 1.66588 14.0566 1.66652 14.1663V17.4996C1.66652 17.7206 1.75432 17.9326 1.9106 18.0889C2.06688 18.2452 2.27884 18.333 2.49985 18.333ZM3.33318 14.508L12.4999 5.34129L14.6582 7.49962L5.49152 16.6663H3.33318V14.508Z"
            fill="currentColor"
          />
          <path
            d="M14.7585 1.90914C14.6808 1.83144 14.5885 1.76981 14.487 1.72776C14.3855 1.68571 14.2767 1.66406 14.1668 1.66406C13.9449 1.66406 13.7321 1.75222 13.5752 1.90914C13.4182 2.06606 13.3301 2.27889 13.3301 2.50081C13.3301 2.72272 13.4182 2.93555 13.5752 3.09247L16.9085 6.42581C16.986 6.50391 17.0781 6.56591 17.1797 6.60822C17.2812 6.65052 17.3901 6.67231 17.5002 6.67231C17.6102 6.67231 17.7191 6.65052 17.8206 6.60822C17.9222 6.56591 18.0143 6.50391 18.0918 6.42581C18.1699 6.34834 18.2319 6.25617 18.2742 6.15462C18.3165 6.05307 18.3383 5.94415 18.3383 5.83414C18.3383 5.72413 18.3165 5.61521 18.2742 5.51366C18.2319 5.41211 18.1699 5.31994 18.0918 5.24247L14.7585 1.90914Z"
            fill="currentColor"
          />
        </svg>
      ),
      label: "Job định kỳ",
    },
    {
      key: "report",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M16.8751 6.875H16.0033L16.1096 5.81119C16.1356 5.55056 16.1067 5.28737 16.0248 5.03858C15.9428 4.78979 15.8097 4.56093 15.6339 4.36674C15.4582 4.17255 15.2437 4.01734 15.0042 3.91112C14.7648 3.80489 14.5058 3.75001 14.2439 3.75H4.50637C4.24439 3.75002 3.98532 3.80493 3.74586 3.9112C3.5064 4.01746 3.29186 4.17272 3.11607 4.36696C2.94027 4.56121 2.80713 4.79013 2.72522 5.03897C2.64331 5.28782 2.61445 5.55107 2.64049 5.81175L3.49642 15.3719C3.51322 15.5218 3.48031 15.2108 3.60005 15.8107H1.73067C1.56491 15.8107 1.40594 15.8765 1.28873 15.9937C1.17152 16.1109 1.10567 16.2699 1.10567 16.4357C1.10567 16.6014 1.17152 16.7604 1.28873 16.8776C1.40594 16.9948 1.56491 17.0607 1.73067 17.0607L17.0001 17.25C17.1659 17.25 17.3249 17.1842 17.4421 17.0669C17.5593 16.9497 17.6251 16.7908 17.6251 16.625C17.6251 16.4592 17.5593 16.3003 17.4421 16.1831C17.3249 16.0658 17.1659 16 17.0001 16H15.1309C15.1828 15.8586 15.2176 15.7115 15.2344 15.5618L15.4406 12.5H16.8751C17.3722 12.4995 17.8488 12.3017 18.2003 11.9502C18.5519 11.5987 18.7496 11.1221 18.7501 10.625V8.75C18.7496 8.25289 18.5519 7.77629 18.2003 7.42478C17.8488 7.07327 17.3722 6.87555 16.8751 6.875ZM5.6614 15.8107C5.50637 15.8112 5.35673 15.7538 5.24179 15.6498C5.12685 15.5457 5.0549 15.4025 5.04003 15.2482L4.13796 5.83982C4.12926 5.75289 4.13886 5.6651 4.16615 5.5821C4.19344 5.49911 4.23781 5.42275 4.29641 5.35795C4.35501 5.29314 4.42653 5.24133 4.50637 5.20585C4.58621 5.17037 4.67259 5.15201 4.75996 5.15195L14.0205 5.20585C14.1079 5.20591 14.1942 5.22426 14.274 5.25971C14.3538 5.29517 14.4254 5.34694 14.4839 5.4117C14.5425 5.47647 14.5869 5.55278 14.6142 5.63574C14.6415 5.71869 14.6512 5.80645 14.6425 5.89335L14.0205 15.2488C14.0055 15.4031 13.9335 15.5462 13.8185 15.6501C13.7035 15.754 13.5539 15.8113 13.3989 15.8107H5.6614ZM17.5001 10.625C17.5 10.7907 17.4341 10.9496 17.3169 11.0668C17.1998 11.184 17.0408 11.2499 16.8751 11.25H15.5657L15.8782 8.125H16.8751C17.0408 8.1251 17.1998 8.19098 17.3169 8.30817C17.4341 8.42536 17.5 8.58427 17.5001 8.75V10.625Z"
            fill="currentColor"
          />
        </svg>
      ),
      label: "Báo cáo, phân tích",
    },
  ];

  const [collapsed, setCollapsed] = useState(false);

  return (
    <Layout className={styles.layout}>
      <Sider
        breakpoint="lg"
        collapsedWidth="0"
        className={styles.sidebar}
        width={349}
        collapsible
        collapsed={collapsed}
        onCollapse={(value) => setCollapsed(value)}
      >
        <Link to="/app" className={styles.logo}>
          <img src="/logo.png" alt="CD" />
          <span>CHỨNG CHỈ TIỀN GỬI</span>
        </Link>
        <Menu
          defaultSelectedKeys={["dashboard"]}
          className={styles.menu}
          theme="light"
          mode="inline"
          items={items}
        />
      </Sider>
      <Layout>
        <Header className={styles.header}>
          <Flex className={styles.headerInner} align="center">
            <Input
              placeholder="Tìm kiếm"
              style={{ flex: 1 }}
              suffix={<SearchOutlined />}
            />
            <Flex className={styles.headerIcons} align="center">
              <Badge count={21} color="#2D9CDB">
                <Avatar
                  shape="square"
                  icon={<BellOutlined />}
                  style={{
                    backgroundColor: "rgba(45, 156, 219, 0.15)",
                    color: "#2D9CDB",
                  }}
                />
              </Badge>
              <Badge count={53} color="#2D9CDB">
                <Avatar
                  shape="square"
                  icon={<MessageOutlined />}
                  style={{
                    backgroundColor: "rgba(45, 156, 219, 0.15)",
                    color: "#2D9CDB",
                  }}
                />
              </Badge>
              <Badge count={15} color="#5E6C93">
                <Avatar
                  shape="square"
                  icon={<GiftOutlined />}
                  style={{
                    backgroundColor: "rgba(94, 108, 147, 0.15)",
                    color: "#5E6C93",
                  }}
                />
              </Badge>
              <Badge count={19} color="#FF5B5B">
                <Avatar
                  shape="square"
                  icon={<SettingOutlined />}
                  style={{
                    backgroundColor: "rgba(255, 91, 91, 0.15)",
                    color: "#FF5B5B",
                  }}
                />
              </Badge>
            </Flex>
            <Divider type="vertical" />
            <Flex align="center" gap={10} style={{ paddingLeft: 8 }}>
              <Typography className={styles.welcome}>Xin chào, Oanh</Typography>
              <Dropdown
                placement="bottomRight"
                menu={{
                  items: [
                    { key: "my-profile", label: "My Profile" },
                    { key: "logout", label: "Logout" },
                  ],
                }}
              >
                <Avatar
                  src="/avatar.png"
                  style={{ width: 48, height: 48, border: "4px solid #fff" }}
                />
              </Dropdown>
            </Flex>
          </Flex>
        </Header>
        <Content className={styles.content}>
          <Outlet />
        </Content>
      </Layout>
    </Layout>
  );
};
